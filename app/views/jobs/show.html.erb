<div class="show-container">
  <div class="show-layout">
    <div class="link-back"><i class="fas fa-angle-left"></i><strong><%= link_to "Back to offers", jobs_path %></strong></div>
    <div class="media-box">
      <p>add img</p>
    </div>
  </div>

  <div class="show-layout">
    <div data-controller="modal">
      <button data-action="modal#open" class="btn-apply">Apply</button>

      <div data-modal-target="container" class="modal-container hidden">
        <div class="modal-background" data-action="click->modal#close"></div>

        <div class="modal-content">
          <div class="modal-header">
            <h2>Application confirmation</h2>
            <button class="modal-close" data-action="modal#close">&times;</button>
          </div>

          <div class="modal-body">
            <%= form_with model: @application, url: job_applications_path(@job), method: :post, data: { turbo_frame: "modal" } do |f| %>
              <%= f.hidden_field :job_id, value: @job.id %>
              <%= f.hidden_field :stage, value: 'Applied' %>
              <%= f.hidden_field :match, value: false %>

              <%= f.submit "Confirm application", class: "btn btn-success" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="job-offer-card">
      <div class="job-card-header">
        <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/logo.png" alt="company logo" class="company-logo">
        <div class="job-card-header-info">
          <h2><%= @job.job_title %></h2>
          <div class="flexbox">
            <p><%= @job.company.name %></p>
            <p>|</p>
            <p><%= @job.location %></p>
          </div>
        </div>
      </div>
      <div class="job-card-content">
        <p><%= @job.contract %></p>
        <p><%= @job.experience %></p>
        <p><%= @job.language %></p>
        <p><%= @job.company.employee_number %><span class="material-symbols-outlined">group</span></p>
      </div>
      <div class="offer-salary-box">
        <h3> $<%= @job.salary %></h3>
      </div>
      <div class="job-offer-box">
        <h4>Company description:</h4>
        <p><%= @job.company.description %></p>
      </div>
      <div class="job-offer-box">
        <h4>Your missions:</h4>
        <p><%= @job.missions %></p>
      </div>
    </div>
  </div>
</div>



<div data-controller="modal">
  <button data-action="modal#open" class="btn-apply">Apply</button>

  <div data-modal-target="container" class="modal-container hidden">
    <div class="modal-background" data-action="click->modal#close"></div>

    <div class="modal-content">
      <div class="modal-header">
        <h2>Application confirmation</h2>
        <button class="modal-close" data-action="modal#close">&times;</button>
      </div>

      <div class="modal-body">
        <%= form_with model: @application, url: job_applications_path(@job), method: :post, data: { turbo_frame: "modal" } do |f| %>
          <%= f.hidden_field :job_id, value: @job.id %>
          <%= f.hidden_field :stage, value: 'Applied' %>
          <%= f.hidden_field :match, value: false %>

          <%= f.submit "Confirm application", class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<div>
  <div id="favorite-button">
    <% if current_user.favorite_jobs.include?(@job) %>
      <%= link_to "Unfavorite", job_favorites_path(@job), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
    <% else %>
      <%= simple_form_for [@job, @favorite] do |f| %>
        <%= f.submit "Add to favorites", class: "btn btn-primary" %>
      <% end %>
    <% end %>
  </div>
</div>
